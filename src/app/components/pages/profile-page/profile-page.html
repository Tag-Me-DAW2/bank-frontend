<header-component></header-component>
<div class="profile-page">
    <div class="profile-page__general-wrapper">
        <h1 class="profile-page__header-title">MY ACCOUNTS</h1>
        <div class="profile-page__account-wrapper">
            <div class="profile-page__account-container">
                <embla-slider direction="horizontal" (selectedItemIndex)="onAccountSelected($event)">
                    @for (account of accounts; track $index) {
                    <a class="profile-page__account-card">
                        <div class="profile-page__account-number">{{ account.iban }}</div>
                        <div class="profile-page__account-balance">{{ account.balance | currency }}</div>

                        <div class="profile-page__account-movements">
                            <span>
                                Recent Movements
                                <a routerLink="/bank/movements/{{ account.id }}">See more</a>
                            </span>

                            <div class="profile-page__accounts-cards-wrapper">
                                @for (movement of account.movements.slice(0, 4); track $index) {
                                <a class="profile-page__movement-item" [routerLink]="['/bank/movements/', account.id]"
                                    [queryParams]="{ movementId: movement.id }">
                                    <span class="profile-page__movement-type">
                                        <i class="bx" [ngClass]="{
                                        'bx-trending-up deposit': movement.type == 'DEPOSIT',
                                        'bx-trending-down withdrawal': movement.type == 'WITHDRAWAL'
                                    }">
                                        </i>
                                    </span>
                                    <div class="profile-page__movement-central-info">
                                        <span class="profile-page__movement-description">{{ movement.origin
                                            }}</span>
                                        <span class="profile-page__movement-date">{{ movement.date |
                                            date:'shortDate'
                                            }}</span>
                                    </div>
                                    <span class="profile-page__movement-amount">
                                        @if (movement.type == 'DEPOSIT') {
                                        <span>+</span>
                                        } @else {
                                        <span>-</span>
                                        }
                                        {{ movement.amount | currency}}
                                    </span>
                                </a>
                                }
                            </div>
                        </div>
                    </a>
                    }
                </embla-slider>
            </div>
            <div class="profile-page__card-wrapper">
                <embla-slider direction="vertical">
                    @for (card of selectedAccount.cards; track $index) {
                    <a class="profile-page__card-container" [routerLink]="['/bank/movements/', selectedAccount.id]"
                                    [queryParams]="{ cardId: card.id }">
                        <div class="profile-page__card-number">{{ card.number }}</div>
                    </a>
                    }
                </embla-slider>
            </div>
        </div>
    </div>
    <hr class="profile-page__separator-bar">
    <stats-page [accountId]="selectedAccount.id"></stats-page>
</div>